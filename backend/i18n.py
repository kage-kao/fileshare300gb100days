"""
Multilingual support for the Telegram bot.
Auto-detects user language from Telegram's language_code.
"""

TRANSLATIONS = {
    "en": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Send me:",
        "start_gigafile": "GigaFile link -> 3 types of links",
        "start_url": "Any URL -> re-upload to GigaFile",
        "start_file": "File/document -> upload to GigaFile",
        "btn_help": "Help",
        "btn_upload_file": "Upload file",
        "btn_language": "Language",
        "help_title": "GigaFile.nu Bot - Help",
        "help_gigafile": "1. GigaFile.nu link:",
        "help_gigafile_desc": "Send a link - get 3 types of links",
        "help_url": "2. Any URL:",
        "help_url_desc": "Send a link - I'll download and re-upload",
        "help_url_days": "URL days=30 - set 30 days",
        "help_file": "3. File/document:",
        "help_file_desc": "Send a file - I'll upload to GigaFile",
        "help_commands": "Commands:",
        "done": "Done!",
        "page_url": "Download page:",
        "direct_url": "Direct link (needs cookies):",
        "proxy_url": "Proxy (no cookies, through server):",
        "file_label": "File:",
        "checking": "Checking file...",
        "error": "Error:",
        "unknown_error": "unknown",
        "cancelled": "Operation cancelled.",
        "no_active": "No active operations.",
        "uploading": "Uploading to GigaFile",
        "downloading": "Downloading",
        "init": "Initializing...",
        "file_too_big": "File is too large for Telegram API ({size} MB).\nTelegram limit: 20 MB.\nSend a file link instead.",
        "receiving_file": "Receiving file...",
        "choose_duration": "Choose storage duration:",
        "file_info": "File: {name} ({size} MB)",
        "uploading_duration": "Uploading to GigaFile ({dur} days)...",
        "file_not_found": "File not found. Send again.",
        "send_link_or_file": "Send an HTTP link or a file.",
        "gigafile_bad_link": "This is a GigaFile.nu link, but I couldn't parse the file ID.\nCheck the link format.",
        "btn_open_page": "Open page",
        "btn_download_proxy": "Download (proxy)",
        "btn_new_upload": "New upload",
        "dur_days": "{n} days",
        "lang_changed": "Language changed to English",
        "choose_language": "Choose language:",
    },
    "ru": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Отправь мне:",
        "start_gigafile": "Ссылку GigaFile -> 3 типа ссылок",
        "start_url": "Любой URL -> перезалью на GigaFile",
        "start_file": "Файл/документ -> залью на GigaFile",
        "btn_help": "Помощь",
        "btn_upload_file": "Загрузить файл",
        "btn_language": "Язык",
        "help_title": "GigaFile.nu Bot - Справка",
        "help_gigafile": "1. Ссылка GigaFile.nu:",
        "help_gigafile_desc": "Отправь ссылку - получишь 3 типа ссылок",
        "help_url": "2. Любой URL:",
        "help_url_desc": "Отправь ссылку - скачаю и перезалью",
        "help_url_days": "URL days=30 - срок 30 дней",
        "help_file": "3. Файл/документ:",
        "help_file_desc": "Отправь файл - залью на GigaFile",
        "help_commands": "Команды:",
        "done": "Готово!",
        "page_url": "Страница скачивания:",
        "direct_url": "Прямая ссылка (нужны куки):",
        "proxy_url": "Прокси (без куки, через сервер):",
        "file_label": "Файл:",
        "checking": "Проверяю файл...",
        "error": "Ошибка:",
        "unknown_error": "неизвестно",
        "cancelled": "Операция отменена.",
        "no_active": "Нет активных операций.",
        "uploading": "Заливаю на GigaFile",
        "downloading": "Скачиваю",
        "init": "Инициализация...",
        "file_too_big": "Файл слишком большой для Telegram API ({size} МБ).\nЛимит Telegram: 20 МБ.\nОтправь ссылку на файл вместо самого файла.",
        "receiving_file": "Получаю файл...",
        "choose_duration": "Выбери срок хранения:",
        "file_info": "Файл: {name} ({size} МБ)",
        "uploading_duration": "Заливаю на GigaFile (срок: {dur} дн.)...",
        "file_not_found": "Файл не найден. Отправь заново.",
        "send_link_or_file": "Отправь HTTP-ссылку или файл.",
        "gigafile_bad_link": "Это ссылка GigaFile.nu, но не удалось распознать ID файла.\nПроверь формат ссылки.",
        "btn_open_page": "Открыть страницу",
        "btn_download_proxy": "Скачать (прокси)",
        "btn_new_upload": "Новая загрузка",
        "dur_days": "{n} дн.",
        "lang_changed": "Язык изменён на русский",
        "choose_language": "Выбери язык:",
    },
    "es": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Envieme:",
        "start_gigafile": "Enlace GigaFile -> 3 tipos de enlaces",
        "start_url": "Cualquier URL -> resubir a GigaFile",
        "start_file": "Archivo/documento -> subir a GigaFile",
        "btn_help": "Ayuda",
        "btn_upload_file": "Subir archivo",
        "btn_language": "Idioma",
        "help_title": "GigaFile.nu Bot - Ayuda",
        "help_gigafile": "1. Enlace GigaFile.nu:",
        "help_gigafile_desc": "Envia un enlace - obtendras 3 tipos de enlaces",
        "help_url": "2. Cualquier URL:",
        "help_url_desc": "Envia un enlace - descargare y resubire",
        "help_url_days": "URL days=30 - 30 dias",
        "help_file": "3. Archivo/documento:",
        "help_file_desc": "Envia un archivo - lo subire a GigaFile",
        "help_commands": "Comandos:",
        "done": "Listo!",
        "page_url": "Pagina de descarga:",
        "direct_url": "Enlace directo (necesita cookies):",
        "proxy_url": "Proxy (sin cookies, a traves del servidor):",
        "file_label": "Archivo:",
        "checking": "Verificando archivo...",
        "error": "Error:",
        "unknown_error": "desconocido",
        "cancelled": "Operacion cancelada.",
        "no_active": "No hay operaciones activas.",
        "uploading": "Subiendo a GigaFile",
        "downloading": "Descargando",
        "init": "Inicializando...",
        "file_too_big": "Archivo demasiado grande para Telegram API ({size} MB).\nLimite Telegram: 20 MB.\nEnvia un enlace al archivo.",
        "receiving_file": "Recibiendo archivo...",
        "choose_duration": "Elige duracion de almacenamiento:",
        "file_info": "Archivo: {name} ({size} MB)",
        "uploading_duration": "Subiendo a GigaFile ({dur} dias)...",
        "file_not_found": "Archivo no encontrado. Envia de nuevo.",
        "send_link_or_file": "Envia un enlace HTTP o un archivo.",
        "gigafile_bad_link": "Este es un enlace GigaFile.nu, pero no pude reconocer el ID.\nVerifica el formato.",
        "btn_open_page": "Abrir pagina",
        "btn_download_proxy": "Descargar (proxy)",
        "btn_new_upload": "Nueva subida",
        "dur_days": "{n} dias",
        "lang_changed": "Idioma cambiado a espanol",
        "choose_language": "Elige idioma:",
    },
    "de": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Sende mir:",
        "start_gigafile": "GigaFile-Link -> 3 Linktypen",
        "start_url": "Beliebige URL -> erneut auf GigaFile hochladen",
        "start_file": "Datei/Dokument -> auf GigaFile hochladen",
        "btn_help": "Hilfe",
        "btn_upload_file": "Datei hochladen",
        "btn_language": "Sprache",
        "help_title": "GigaFile.nu Bot - Hilfe",
        "help_gigafile": "1. GigaFile.nu Link:",
        "help_gigafile_desc": "Sende einen Link - erhalte 3 Linktypen",
        "help_url": "2. Beliebige URL:",
        "help_url_desc": "Sende einen Link - ich lade herunter und erneut hoch",
        "help_url_days": "URL days=30 - 30 Tage",
        "help_file": "3. Datei/Dokument:",
        "help_file_desc": "Sende eine Datei - ich lade auf GigaFile hoch",
        "help_commands": "Befehle:",
        "done": "Fertig!",
        "page_url": "Download-Seite:",
        "direct_url": "Direkter Link (Cookies erforderlich):",
        "proxy_url": "Proxy (ohne Cookies, uber Server):",
        "file_label": "Datei:",
        "checking": "Datei wird gepruft...",
        "error": "Fehler:",
        "unknown_error": "unbekannt",
        "cancelled": "Vorgang abgebrochen.",
        "no_active": "Keine aktiven Vorgange.",
        "uploading": "Hochladen auf GigaFile",
        "downloading": "Herunterladen",
        "init": "Initialisierung...",
        "file_too_big": "Datei zu gross fur Telegram API ({size} MB).\nTelegram-Limit: 20 MB.\nSende stattdessen einen Link.",
        "receiving_file": "Datei wird empfangen...",
        "choose_duration": "Speicherdauer wahlen:",
        "file_info": "Datei: {name} ({size} MB)",
        "uploading_duration": "Hochladen auf GigaFile ({dur} Tage)...",
        "file_not_found": "Datei nicht gefunden. Erneut senden.",
        "send_link_or_file": "Sende einen HTTP-Link oder eine Datei.",
        "gigafile_bad_link": "Dies ist ein GigaFile.nu-Link, aber die Datei-ID konnte nicht erkannt werden.",
        "btn_open_page": "Seite offnen",
        "btn_download_proxy": "Download (Proxy)",
        "btn_new_upload": "Neuer Upload",
        "dur_days": "{n} Tage",
        "lang_changed": "Sprache auf Deutsch geandert",
        "choose_language": "Sprache wahlen:",
    },
    "fr": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Envoyez-moi:",
        "start_gigafile": "Lien GigaFile -> 3 types de liens",
        "start_url": "N'importe quelle URL -> re-telecharger sur GigaFile",
        "start_file": "Fichier/document -> telecharger sur GigaFile",
        "btn_help": "Aide",
        "btn_upload_file": "Telecharger un fichier",
        "btn_language": "Langue",
        "help_title": "GigaFile.nu Bot - Aide",
        "help_gigafile": "1. Lien GigaFile.nu:",
        "help_gigafile_desc": "Envoyez un lien - obtenez 3 types de liens",
        "help_url": "2. N'importe quelle URL:",
        "help_url_desc": "Envoyez un lien - je telecharge et re-telecharge",
        "help_url_days": "URL days=30 - 30 jours",
        "help_file": "3. Fichier/document:",
        "help_file_desc": "Envoyez un fichier - je telecharge sur GigaFile",
        "help_commands": "Commandes:",
        "done": "Termine!",
        "page_url": "Page de telechargement:",
        "direct_url": "Lien direct (cookies requis):",
        "proxy_url": "Proxy (sans cookies, via serveur):",
        "file_label": "Fichier:",
        "checking": "Verification du fichier...",
        "error": "Erreur:",
        "unknown_error": "inconnue",
        "cancelled": "Operation annulee.",
        "no_active": "Aucune operation active.",
        "uploading": "Telechargement sur GigaFile",
        "downloading": "Telechargement",
        "init": "Initialisation...",
        "file_too_big": "Fichier trop volumineux pour Telegram API ({size} Mo).\nLimite Telegram: 20 Mo.\nEnvoyez un lien vers le fichier.",
        "receiving_file": "Reception du fichier...",
        "choose_duration": "Choisissez la duree de stockage:",
        "file_info": "Fichier: {name} ({size} Mo)",
        "uploading_duration": "Telechargement sur GigaFile ({dur} jours)...",
        "file_not_found": "Fichier non trouve. Renvoyez.",
        "send_link_or_file": "Envoyez un lien HTTP ou un fichier.",
        "gigafile_bad_link": "C'est un lien GigaFile.nu, mais l'ID n'a pas pu etre reconnu.",
        "btn_open_page": "Ouvrir la page",
        "btn_download_proxy": "Telecharger (proxy)",
        "btn_new_upload": "Nouveau telechargement",
        "dur_days": "{n} jours",
        "lang_changed": "Langue changee en francais",
        "choose_language": "Choisissez la langue:",
    },
    "zh": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Send me:",
        "start_gigafile": "GigaFile link -> 3 types of links",
        "start_url": "Any URL -> re-upload to GigaFile",
        "start_file": "File/document -> upload to GigaFile",
        "btn_help": "Help",
        "btn_upload_file": "Upload file",
        "btn_language": "Language",
        "help_title": "GigaFile.nu Bot - Help",
        "help_gigafile": "1. GigaFile.nu link:",
        "help_gigafile_desc": "Send a link to get 3 types of links",
        "help_url": "2. Any URL:",
        "help_url_desc": "Send a link - download and re-upload",
        "help_url_days": "URL days=30 - 30 days storage",
        "help_file": "3. File/document:",
        "help_file_desc": "Send a file - upload to GigaFile",
        "help_commands": "Commands:",
        "done": "Done!",
        "page_url": "Download page:",
        "direct_url": "Direct link (cookies required):",
        "proxy_url": "Proxy (no cookies, via server):",
        "file_label": "File:",
        "checking": "Checking...",
        "error": "Error:",
        "unknown_error": "unknown",
        "cancelled": "Operation cancelled.",
        "no_active": "No active operations.",
        "uploading": "Uploading to GigaFile",
        "downloading": "Downloading",
        "init": "Initializing...",
        "file_too_big": "File too large ({size} MB).\nLimit: 20 MB.\nSend a link instead.",
        "receiving_file": "Receiving file...",
        "choose_duration": "Choose storage duration:",
        "file_info": "File: {name} ({size} MB)",
        "uploading_duration": "Uploading ({dur} days)...",
        "file_not_found": "File not found. Send again.",
        "send_link_or_file": "Send an HTTP link or file.",
        "gigafile_bad_link": "GigaFile.nu link detected but couldn't parse file ID.",
        "btn_open_page": "Open page",
        "btn_download_proxy": "Download (proxy)",
        "btn_new_upload": "New upload",
        "dur_days": "{n} days",
        "lang_changed": "Language changed to Chinese",
        "choose_language": "Choose language:",
    },
    "ja": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Send me:",
        "start_gigafile": "GigaFile link -> 3 types of links",
        "start_url": "Any URL -> re-upload to GigaFile",
        "start_file": "File/document -> upload to GigaFile",
        "btn_help": "Help",
        "btn_upload_file": "Upload file",
        "btn_language": "Language",
        "help_title": "GigaFile.nu Bot - Help",
        "help_gigafile": "1. GigaFile.nu link:",
        "help_gigafile_desc": "Send a link to get 3 types of links",
        "help_url": "2. Any URL:",
        "help_url_desc": "Send a link - download and re-upload",
        "help_url_days": "URL days=30 - 30 days",
        "help_file": "3. File/document:",
        "help_file_desc": "Send a file - upload to GigaFile",
        "help_commands": "Commands:",
        "done": "Done!",
        "page_url": "Download page:",
        "direct_url": "Direct link (cookies required):",
        "proxy_url": "Proxy (no cookies):",
        "file_label": "File:",
        "checking": "Checking...",
        "error": "Error:",
        "unknown_error": "unknown",
        "cancelled": "Operation cancelled.",
        "no_active": "No active operations.",
        "uploading": "Uploading to GigaFile",
        "downloading": "Downloading",
        "init": "Initializing...",
        "file_too_big": "File too large ({size} MB). Limit: 20 MB. Send a link instead.",
        "receiving_file": "Receiving file...",
        "choose_duration": "Choose duration:",
        "file_info": "File: {name} ({size} MB)",
        "uploading_duration": "Uploading ({dur} days)...",
        "file_not_found": "File not found.",
        "send_link_or_file": "Send an HTTP link or file.",
        "gigafile_bad_link": "GigaFile link found but couldn't parse ID.",
        "btn_open_page": "Open page",
        "btn_download_proxy": "Download (proxy)",
        "btn_new_upload": "New upload",
        "dur_days": "{n} days",
        "lang_changed": "Language changed to Japanese",
        "choose_language": "Choose language:",
    },
    "pt": {
        "start_title": "GigaFile.nu Bot",
        "start_desc": "Envie-me:",
        "start_gigafile": "Link GigaFile -> 3 tipos de links",
        "start_url": "Qualquer URL -> re-upload no GigaFile",
        "start_file": "Arquivo/documento -> upload no GigaFile",
        "btn_help": "Ajuda",
        "btn_upload_file": "Enviar arquivo",
        "btn_language": "Idioma",
        "help_title": "GigaFile.nu Bot - Ajuda",
        "help_gigafile": "1. Link GigaFile.nu:",
        "help_gigafile_desc": "Envie um link - obtenha 3 tipos de links",
        "help_url": "2. Qualquer URL:",
        "help_url_desc": "Envie um link - baixo e re-upload",
        "help_url_days": "URL days=30 - 30 dias",
        "help_file": "3. Arquivo/documento:",
        "help_file_desc": "Envie um arquivo - upload no GigaFile",
        "help_commands": "Comandos:",
        "done": "Pronto!",
        "page_url": "Pagina de download:",
        "direct_url": "Link direto (cookies necessarios):",
        "proxy_url": "Proxy (sem cookies):",
        "file_label": "Arquivo:",
        "checking": "Verificando...",
        "error": "Erro:",
        "unknown_error": "desconhecido",
        "cancelled": "Operacao cancelada.",
        "no_active": "Nenhuma operacao ativa.",
        "uploading": "Enviando para GigaFile",
        "downloading": "Baixando",
        "init": "Inicializando...",
        "file_too_big": "Arquivo muito grande ({size} MB). Limite: 20 MB. Envie um link.",
        "receiving_file": "Recebendo arquivo...",
        "choose_duration": "Escolha a duracao:",
        "file_info": "Arquivo: {name} ({size} MB)",
        "uploading_duration": "Enviando para GigaFile ({dur} dias)...",
        "file_not_found": "Arquivo nao encontrado.",
        "send_link_or_file": "Envie um link HTTP ou arquivo.",
        "gigafile_bad_link": "Link GigaFile detectado mas nao foi possivel reconhecer o ID.",
        "btn_open_page": "Abrir pagina",
        "btn_download_proxy": "Download (proxy)",
        "btn_new_upload": "Novo upload",
        "dur_days": "{n} dias",
        "lang_changed": "Idioma alterado para portugues",
        "choose_language": "Escolha o idioma:",
    },
}

LANG_NAMES = {
    "en": "English",
    "ru": "Русский",
    "es": "Espanol",
    "de": "Deutsch",
    "fr": "Francais",
    "zh": "Chinese",
    "ja": "Japanese",
    "pt": "Portugues",
}

SUPPORTED_LANGS = list(TRANSLATIONS.keys())


def get_lang(language_code: str | None) -> str:
    if not language_code:
        return "en"
    code = language_code.lower()[:2]
    return code if code in TRANSLATIONS else "en"


def t(lang: str, key: str, **kwargs) -> str:
    translations = TRANSLATIONS.get(lang, TRANSLATIONS["en"])
    text = translations.get(key, TRANSLATIONS["en"].get(key, key))
    if kwargs:
        text = text.format(**kwargs)
    return text
